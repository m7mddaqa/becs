{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\m1571\\\\OneDrive\\\\Desktop\\\\\\u05D1\\u05D9\\u05D5 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA\\\\becs_project\\\\frontend\\\\src\\\\pages\\\\Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport DonationForm from \"../components/DonationForm\";\nimport RegularDistributionForm from \"../components/RegularDistributionForm\";\nimport EmergencyDistributionForm from \"../components/EmergencyDistributionForm\";\nimport Alert from \"../components/Alert\";\nimport ReplacementModal from \"../components/ReplacementModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst bloodDistribution = {\n  \"A+\": 34,\n  \"A-\": 4,\n  \"B+\": 17,\n  \"B-\": 2,\n  \"AB+\": 7,\n  \"AB-\": 1,\n  \"O+\": 32,\n  \"O-\": 3\n};\nconst bloodCompatibility = {\n  \"A+\": [\"A+\", \"A-\", \"O+\", \"O-\"],\n  \"O+\": [\"O+\", \"O-\"],\n  \"B+\": [\"B+\", \"B-\", \"O+\", \"O-\"],\n  \"AB+\": [\"AB+\", \"A+\", \"B+\", \"O+\", \"A-\", \"B-\", \"AB-\", \"O-\"],\n  \"A-\": [\"A-\", \"O-\"],\n  \"O-\": [\"O-\"],\n  \"B-\": [\"B-\", \"O-\"],\n  \"AB-\": [\"AB-\", \"A-\", \"B-\", \"O-\"]\n};\nconst getStatusColor = percent => {\n  if (percent < 5) return \"bg-red-500\";\n  if (percent < 15) return \"bg-yellow-400\";\n  return \"bg-green-500\";\n};\nexport default function Dashboard() {\n  _s();\n  const [donations, setDonations] = useState([]);\n  const [bloodData, setBloodData] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [showDistributionForm, setShowDistributionForm] = useState(false);\n  const [showEmergencyForm, setShowEmergencyForm] = useState(false);\n  const [alert, setAlert] = useState(null);\n  const [modalData, setModalData] = useState({\n    isOpen: false\n  });\n  useEffect(() => {\n    fetchDonations();\n  }, []);\n  const fetchDonations = () => {\n    fetch(\"http://127.0.0.1:8000/api/donations/\").then(res => res.json()).then(data => {\n      setDonations(data);\n      updateBloodStats(data);\n    });\n  };\n  const updateBloodStats = donationList => {\n    const grouped = {};\n    donationList.forEach(don => {\n      grouped[don.blood_type] = (grouped[don.blood_type] || 0) + 1;\n    });\n    const updated = Object.entries(bloodDistribution).map(([type, percent]) => ({\n      type,\n      percent,\n      amount: grouped[type] || 0\n    }));\n    setBloodData(updated);\n  };\n  const performDistribution = async (usedType, quantity, originalType = null) => {\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/api/distribute/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          blood_type: usedType,\n          quantity\n        })\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setAlert({\n          type: \"success\",\n          title: \"驻拽 爪注 爪!\",\n          message: originalType ? `爪注 驻拽 砖 ${quantity} 转 住 ${usedType} 拽 ${originalType}` : data.message\n        });\n        fetchDonations();\n      } else {\n        setAlert({\n          type: \"error\",\n          title: \"砖 驻拽\",\n          message: data.message\n        });\n      }\n    } catch (err) {\n      console.error(err);\n      setAlert({\n        type: \"error\",\n        title: \"砖转 专砖转\",\n        message: \" 转 转专 砖专转\"\n      });\n    }\n    setTimeout(() => setAlert(null), 5000);\n  };\n  const handleDistribute = async ({\n    blood_type,\n    quantity\n  }) => {\n    const available = bloodData.reduce((acc, item) => {\n      acc[item.type] = item.amount;\n      return acc;\n    }, {});\n    if (available[blood_type] >= quantity) {\n      return performDistribution(blood_type, quantity);\n    }\n    const alternatives = bloodCompatibility[blood_type].filter(type => type !== blood_type && available[type] >= quantity);\n    if (alternatives.length === 0) {\n      setAlert({\n        type: \"error\",\n        title: \"  住驻拽\",\n        message: `住 驻拽 ${quantity} 转 ${blood_type},   爪 住 转  转 拽砖转.`\n      });\n      setTimeout(() => setAlert(null), 5000);\n      return;\n    }\n    setModalData({\n      isOpen: true,\n      originalType: blood_type,\n      replacementType: null,\n      options: alternatives,\n      quantity\n    });\n  };\n  const confirmReplacement = replacementType => {\n    performDistribution(replacementType, modalData.quantity, modalData.originalType);\n    setModalData({\n      isOpen: false\n    });\n  };\n  const cancelReplacement = () => {\n    setAlert({\n      type: \"info\",\n      title: \"驻拽 \",\n      message: \"砖转砖 专  砖转砖 住  驻.\"\n    });\n    setModalData({\n      isOpen: false\n    });\n    setTimeout(() => setAlert(null), 5000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gradient-to-b from-gray-100 to-white min-h-screen\",\n    dir: \"rtl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap justify-between items-center mb-6 gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/blood.png\",\n          alt: \"Blood Logo\",\n          className: \"w-14 h-14 object-contain animate-pulse drop-shadow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-extrabold text-blue-900 tracking-tight shadow-sm\",\n          children: \"\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA \\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05D1\\u05E0\\u05E7 \\u05D4\\u05D3\\u05DD \\u05D4\\u05DC\\u05D0\\u05D5\\u05DE\\u05D9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-4 py-2 rounded-lg shadow-md font-semibold tracking-tight flex items-center gap-2 transition-colors duration-200 ${showForm ? 'bg-blue-700' : 'bg-blue-600'} text-white hover:bg-opacity-90`,\n          onClick: () => {\n            setShowForm(true);\n            setShowDistributionForm(false);\n            setShowEmergencyForm(false);\n            setAlert(null);\n          },\n          children: \"\\uD83E\\uDDF8 \\u05E7\\u05DC\\u05D9\\u05D8\\u05EA \\u05EA\\u05E8\\u05D5\\u05DE\\u05D5\\u05EA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-4 py-2 rounded-lg shadow-md font-semibold tracking-tight flex items-center gap-2 transition-colors duration-200 ${showDistributionForm ? 'bg-blue-700' : 'bg-blue-500'} text-white hover:bg-opacity-90`,\n          onClick: () => {\n            setShowDistributionForm(true);\n            setShowForm(false);\n            setShowEmergencyForm(false);\n            setAlert(null);\n          },\n          children: \"\\uD83D\\uDC99 \\u05E0\\u05D9\\u05E4\\u05D5\\u05E7 \\u05E9\\u05D2\\u05E8\\u05EA\\u05D9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-4 py-2 rounded-lg shadow-md font-semibold tracking-tight flex items-center gap-2 transition-colors duration-200 ${showEmergencyForm ? 'bg-red-700' : 'bg-red-600'} text-white hover:bg-opacity-90`,\n          onClick: () => {\n            setShowEmergencyForm(true);\n            setShowForm(false);\n            setShowDistributionForm(false);\n            setAlert(null);\n          },\n          children: \"\\uD83D\\uDEA8 \\u05E0\\u05D9\\u05E4\\u05D5\\u05E7 \\u05D7\\u05D9\\u05E8\\u05D5\\u05DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), alert && /*#__PURE__*/_jsxDEV(Alert, {\n      type: alert.type,\n      title: alert.title,\n      message: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }, this), showForm && /*#__PURE__*/_jsxDEV(DonationForm, {\n      onClose: () => setShowForm(false),\n      onRefresh: fetchDonations,\n      setAlert: setAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 20\n    }, this), showDistributionForm && /*#__PURE__*/_jsxDEV(RegularDistributionForm, {\n      onDistribute: handleDistribute\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 32\n    }, this), showEmergencyForm && /*#__PURE__*/_jsxDEV(EmergencyDistributionForm, {\n      onDistribute: handleDistribute\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(ReplacementModal, {\n      isOpen: modalData.isOpen,\n      onConfirm: confirmReplacement,\n      onCancel: cancelReplacement,\n      originalType: modalData.originalType,\n      replacementType: modalData.replacementType,\n      options: modalData.options || []\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-6\",\n      children: bloodData.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-4 rounded-2xl shadow-md transition-all duration-300 cursor-pointer border \n              ${item.percent < 5 ? \"bg-red-50 border-red-300 hover:ring-red-400\" : \"bg-white border-gray-200\"}\n              hover:shadow-xl hover:scale-105 hover:ring-2 hover:ring-opacity-50 animate-fade-in`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold text-lg\",\n            children: item.type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-white px-2 py-1 text-xs rounded ${getStatusColor(item.percent)}`,\n            children: item.amount === 0 ? \"拽专\" : item.percent < 5 ? \"拽专\" : item.percent < 15 ? \"\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-700 font-medium mb-2\",\n          children: [\"\\u05DB\\u05DE\\u05D5\\u05EA: \", item.amount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-2 w-full bg-gray-200 rounded overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `h-full ${getStatusColor(item.percent)}`,\n            style: {\n              width: `${item.percent}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 mt-1\",\n          children: [item.percent, \"% \\u05DE\\u05D4\\u05D0\\u05D5\\u05DB\\u05DC\\u05D5\\u05E1\\u05D9\\u05D9\\u05D4\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)]\n      }, item.type, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"ZRo/Z2PFGKSnlqT08gyKNQQ0k60=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["useEffect","useState","DonationForm","RegularDistributionForm","EmergencyDistributionForm","Alert","ReplacementModal","jsxDEV","_jsxDEV","bloodDistribution","bloodCompatibility","getStatusColor","percent","Dashboard","_s","donations","setDonations","bloodData","setBloodData","showForm","setShowForm","showDistributionForm","setShowDistributionForm","showEmergencyForm","setShowEmergencyForm","alert","setAlert","modalData","setModalData","isOpen","fetchDonations","fetch","then","res","json","data","updateBloodStats","donationList","grouped","forEach","don","blood_type","updated","Object","entries","map","type","amount","performDistribution","usedType","quantity","originalType","method","headers","body","JSON","stringify","ok","title","message","err","console","error","setTimeout","handleDistribute","available","reduce","acc","item","alternatives","filter","length","replacementType","options","confirmReplacement","cancelReplacement","className","dir","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onClose","onRefresh","onDistribute","onConfirm","onCancel","style","width","_c","$RefreshReg$"],"sources":["C:/Users/m1571/OneDrive/Desktop/ 专驻转/becs_project/frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport DonationForm from \"../components/DonationForm\";\r\nimport RegularDistributionForm from \"../components/RegularDistributionForm\";\r\nimport EmergencyDistributionForm from \"../components/EmergencyDistributionForm\";\r\nimport Alert from \"../components/Alert\";\r\nimport ReplacementModal from \"../components/ReplacementModal\";\r\n\r\nconst bloodDistribution = {\r\n  \"A+\": 34, \"A-\": 4,\r\n  \"B+\": 17, \"B-\": 2,\r\n  \"AB+\": 7, \"AB-\": 1,\r\n  \"O+\": 32, \"O-\": 3,\r\n};\r\n\r\nconst bloodCompatibility = {\r\n  \"A+\": [\"A+\", \"A-\", \"O+\", \"O-\"],\r\n  \"O+\": [\"O+\", \"O-\"],\r\n  \"B+\": [\"B+\", \"B-\", \"O+\", \"O-\"],\r\n  \"AB+\": [\"AB+\", \"A+\", \"B+\", \"O+\", \"A-\", \"B-\", \"AB-\", \"O-\"],\r\n  \"A-\": [\"A-\", \"O-\"],\r\n  \"O-\": [\"O-\"],\r\n  \"B-\": [\"B-\", \"O-\"],\r\n  \"AB-\": [\"AB-\", \"A-\", \"B-\", \"O-\"]\r\n};\r\n\r\nconst getStatusColor = (percent) => {\r\n  if (percent < 5) return \"bg-red-500\";\r\n  if (percent < 15) return \"bg-yellow-400\";\r\n  return \"bg-green-500\";\r\n};\r\n\r\nexport default function Dashboard() {\r\n  const [donations, setDonations] = useState([]);\r\n  const [bloodData, setBloodData] = useState([]);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [showDistributionForm, setShowDistributionForm] = useState(false);\r\n  const [showEmergencyForm, setShowEmergencyForm] = useState(false);\r\n  const [alert, setAlert] = useState(null);\r\n  const [modalData, setModalData] = useState({ isOpen: false });\r\n  useEffect(() => {\r\n    fetchDonations();\r\n  }, []);\r\n\r\n  const fetchDonations = () => {\r\n    fetch(\"http://127.0.0.1:8000/api/donations/\")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setDonations(data);\r\n        updateBloodStats(data);\r\n      });\r\n  };\r\n\r\n  const updateBloodStats = (donationList) => {\r\n    const grouped = {};\r\n    donationList.forEach((don) => {\r\n      grouped[don.blood_type] = (grouped[don.blood_type] || 0) + 1;\r\n    });\r\n\r\n    const updated = Object.entries(bloodDistribution).map(([type, percent]) => ({\r\n      type,\r\n      percent,\r\n      amount: grouped[type] || 0,\r\n    }));\r\n\r\n    setBloodData(updated);\r\n  };\r\n\r\n  const performDistribution = async (usedType, quantity, originalType = null) => {\r\n    try {\r\n      const res = await fetch(\"http://127.0.0.1:8000/api/distribute/\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ blood_type: usedType, quantity }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setAlert({\r\n          type: \"success\",\r\n          title: \"驻拽 爪注 爪!\",\r\n          message: originalType\r\n            ? `爪注 驻拽 砖 ${quantity} 转 住 ${usedType} 拽 ${originalType}`\r\n            : data.message,\r\n        });\r\n        fetchDonations();\r\n      } else {\r\n        setAlert({\r\n          type: \"error\",\r\n          title: \"砖 驻拽\",\r\n          message: data.message,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setAlert({\r\n        type: \"error\",\r\n        title: \"砖转 专砖转\",\r\n        message: \" 转 转专 砖专转\",\r\n      });\r\n    }\r\n    setTimeout(() => setAlert(null), 5000);\r\n  };\r\n\r\n  const handleDistribute = async ({ blood_type, quantity }) => {\r\n    const available = bloodData.reduce((acc, item) => {\r\n      acc[item.type] = item.amount;\r\n      return acc;\r\n    }, {});\r\n\r\n    if (available[blood_type] >= quantity) {\r\n      return performDistribution(blood_type, quantity);\r\n    }\r\n\r\n    const alternatives = bloodCompatibility[blood_type].filter(\r\n      (type) => type !== blood_type && available[type] >= quantity\r\n    );\r\n\r\n    if (alternatives.length === 0) {\r\n      setAlert({\r\n        type: \"error\",\r\n        title: \"  住驻拽\",\r\n        message: `住 驻拽 ${quantity} 转 ${blood_type},   爪 住 转  转 拽砖转.`,\r\n      });\r\n      setTimeout(() => setAlert(null), 5000);\r\n      return;\r\n    }\r\n\r\n    setModalData({\r\n      isOpen: true,\r\n      originalType: blood_type,\r\n      replacementType: null,\r\n      options: alternatives,\r\n      quantity,\r\n    });\r\n  };\r\n\r\n  const confirmReplacement = (replacementType) => {\r\n    performDistribution(replacementType, modalData.quantity, modalData.originalType);\r\n    setModalData({ isOpen: false });\r\n  };\r\n\r\n  const cancelReplacement = () => {\r\n    setAlert({\r\n      type: \"info\",\r\n      title: \"驻拽 \",\r\n      message: \"砖转砖 专  砖转砖 住  驻.\",\r\n    });\r\n    setModalData({ isOpen: false });\r\n    setTimeout(() => setAlert(null), 5000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-gradient-to-b from-gray-100 to-white min-h-screen\" dir=\"rtl\">\r\n      <div className=\"flex flex-wrap justify-between items-center mb-6 gap-2\">\r\n        <div className=\"flex items-center gap-3\">\r\n  <img\r\n    src=\"/blood.png\"\r\n    alt=\"Blood Logo\"\r\n    className=\"w-14 h-14 object-contain animate-pulse drop-shadow\"\r\n  />\r\n  <h1 className=\"text-3xl font-extrabold text-blue-900 tracking-tight shadow-sm\">\r\n    注专转  拽  \r\n  </h1>\r\n</div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            className={`px-4 py-2 rounded-lg shadow-md font-semibold tracking-tight flex items-center gap-2 transition-colors duration-200 ${showForm ? 'bg-blue-700' : 'bg-blue-600'} text-white hover:bg-opacity-90`}\r\n            onClick={() => {\r\n              setShowForm(true);\r\n              setShowDistributionForm(false);\r\n              setShowEmergencyForm(false);\r\n              setAlert(null);\r\n            }}\r\n          >\r\n            Ц 拽转 转专转\r\n          </button>\r\n\r\n          <button\r\n            className={`px-4 py-2 rounded-lg shadow-md font-semibold tracking-tight flex items-center gap-2 transition-colors duration-200 ${showDistributionForm ? 'bg-blue-700' : 'bg-blue-500'} text-white hover:bg-opacity-90`}\r\n            onClick={() => {\r\n              setShowDistributionForm(true);\r\n              setShowForm(false);\r\n              setShowEmergencyForm(false);\r\n              setAlert(null);\r\n            }}\r\n          >\r\n             驻拽 砖专转\r\n          </button>\r\n\r\n          <button\r\n            className={`px-4 py-2 rounded-lg shadow-md font-semibold tracking-tight flex items-center gap-2 transition-colors duration-200 ${showEmergencyForm ? 'bg-red-700' : 'bg-red-600'} text-white hover:bg-opacity-90`}\r\n            onClick={() => {\r\n              setShowEmergencyForm(true);\r\n              setShowForm(false);\r\n              setShowDistributionForm(false);\r\n              setAlert(null);\r\n            }}\r\n          >\r\n             驻拽 专\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {alert && <Alert type={alert.type} title={alert.title} message={alert.message} />}\r\n\r\n      {showForm && <DonationForm onClose={() => setShowForm(false)} onRefresh={fetchDonations} setAlert={setAlert} />}\r\n      {showDistributionForm && <RegularDistributionForm onDistribute={handleDistribute} />}\r\n      {showEmergencyForm && <EmergencyDistributionForm onDistribute={handleDistribute} />}\r\n<ReplacementModal\r\n        isOpen={modalData.isOpen}\r\n        onConfirm={confirmReplacement}\r\n        onCancel={cancelReplacement}\r\n        originalType={modalData.originalType}\r\n        replacementType={modalData.replacementType}\r\n        options={modalData.options || []}\r\n      />\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-6\">\r\n        {bloodData.map((item) => (\r\n          <div\r\n            key={item.type}\r\n            className={`p-4 rounded-2xl shadow-md transition-all duration-300 cursor-pointer border \r\n              ${item.percent < 5 ? \"bg-red-50 border-red-300 hover:ring-red-400\" : \"bg-white border-gray-200\"}\r\n              hover:shadow-xl hover:scale-105 hover:ring-2 hover:ring-opacity-50 animate-fade-in`}\r\n          >\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"font-bold text-lg\">{item.type}</span>\r\n              <span className={`text-white px-2 py-1 text-xs rounded ${getStatusColor(item.percent)}`}>\r\n                {item.amount === 0\r\n                  ? \"拽专\"\r\n                  : item.percent < 5\r\n                  ? \"拽专\"\r\n                  : item.percent < 15\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"text-sm text-gray-700 font-medium mb-2\">转: {item.amount}</div>\r\n            <div className=\"h-2 w-full bg-gray-200 rounded overflow-hidden\">\r\n              <div\r\n                className={`h-full ${getStatusColor(item.percent)}`}\r\n                style={{ width: `${item.percent}%` }}\r\n              ></div>\r\n            </div>\r\n            <div className=\"text-xs text-gray-500 mt-1\">{item.percent}% 住</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}